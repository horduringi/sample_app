<% provide(:title, "Medical abstraction form") %> 
<div class="row-fluid">
  <p style="text-align:left; color:red; font-size:1.2em; padding-top:10px">ALiCCS - Adult Life after Childhood Cancer in Scandinavia</p>
</div>
<div class="row-fluid">
  <div class="span7">
    <h1 style="text-align:left">Medical abstraction form</h1>
  </div>
  <div class="span5">
    <br>
    <p class="infoSmall">Danish Cancer Society Research Center<br>
      Strandboulevarden 49, 2100 Copenhagen, DK<br>
      <b>Contact:</b><br>
      Thorgerdur Gudmundsdottir, thorgud@cancer.dk, +45 35257648<br>
      Thomas Wiebe, thomas.wiebe@skane.se, +46 46178284</p>
  </div>
</div>
<br><br>
 
<div ng-controller="FormCtrl" ng-app="formApp">
  <%= form_for(@journal) do |j| %>
  <div class="row-fluid">
    <div class="span3">     
        <p>Country:</p>
    </div>
    <div class="span2">
        <%= j.select :country, options_from_collection_for_select(Country.all, :id, :countryname, @journal.country), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">     
        <p><b>Patient ALiCCS-study no.:</b></p>
    </div>
    <div class="span2">
        <%= @journal.studynumber %>
    </div>
  </div>
  <br>
  <div class="row-fluid">
    <div class="span3">     
        <p>Gender:</p>
    </div>
    <div class="span2">
        <%= j.select :gender, options_from_collection_for_select(Gender.all, :id, :gender_combo, @journal.gender), :include_blank => true %>
    </div>
  </div>
  <br>
  <div class="row-fluid">
    <div class="span3">
      <p>Comments:</p>
    </div>
    <div class="span9">
      <%= j.text_area :comments, :cols => "30", :rows => "7" %> 
    </div>     
  </div>
  <br>
        <p>Any missing information concerning different aspects of the childhood cancer treatment?</p>
  <div class="row-fluid">
    <div class="span3"> 
      <p>Chemotherapy?</p>
    </div>
    <div class="span5"> 
        <%= j.select :missinginfochemo, options_from_collection_for_select(MissingInfo.all, :id, :missingInfo_combo, @journal.missinginfochemo), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Radiotherapy?</p>
    </div>
    <div class="span5"> 
        <%= j.select :missinginforadio, options_from_collection_for_select(MissingInfo.all, :id, :missingInfo_combo, @journal.missinginforadio), :include_blank => true %>     
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Surgery?</p>
    </div>
    <div class="span5"> 
        <%= j.select :missinginfosurgery, options_from_collection_for_select(MissingInfo.all, :id,:missingInfo_combo, @journal.missinginfosurgery), :include_blank => true %>
    </div>
  </div>
  <br>
  <div class="row-fluid">
    <div class="span4">
      <p>Data extraction accomplished by:</p>
    </div>
    <div class="span8">
      <p>Thorgerdur Gudmundsdottir, Kræftens Bekæmpelse</p>
    </div>
  </div>
  <br>
  <div class="row-fluid">
    <div class="span3">
        <p>Radiotherapy records copied**:</p>
    </div>
    <div class="span6">
        <%= j.date_select :radiorecordscopied, :start_year => 2013, :end_year => Time.now.year, :default => @journal.radiorecordscopied, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
    <div class="span7 offset3">
        <p class="infoSmall">**copied WITHOUT any personal identifications. Leave empty if not relevant.</p>
    </div>
  </div>
  <br>
  <br>
  <h2>Before the childhood cancer diagnosis</h2>
  <div class="row-fluid">
    <div class="span3">
        <p>Chronic diseases of importance before cancer diagnosis*:</p>
    </div>
    <div class="span5">
        <%= j.select :chronicdisease, options_from_collection_for_select(ChronicDisease.all, :id,:chronicdisease_combo, @journal.chronicdisease), {:include_blank => true},  {"ng-model" => "journal.chronicdisease"} %>
    </div>
    <div class="span4">
      <p class="infoSmall">*See instructions for examples</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.chronicdisease=='5'">
    <div class="span3">
        <p>If yes, please specify*:
    </div>
    <div class="span9">
        <%= j.text_area :chronicdiseasespec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Chromosomal disorder:</p>
    </div>
    <div class="span5">
        <%= j.select :chromosomaldisorder, options_from_collection_for_select(ChromosomalDisorder.all, :id,:chromosomaldisorder_combo, @journal.chromosomaldisorder), {:include_blank => true}, {"ng-model" => "journal.chromosomaldisorder"}%> 
    </div>
    <div class="span4">
      <p class="infoSmall">*See instructions (and appendix III) for examples</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.chromosomaldisorder=='3'">
    <div class="span3">
        <p>If yes, other than Down's syndrome, please specify*:
    </div>
    <div class="span9">
        <%= j.text_area :chromosomaldisorderspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Immune deficiency</p>
    </div>
    <div class="span2">
        <%= j.select :immunedeficiency, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.immunedeficiency), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Congenital anomaly</p>
    </div>
    <div class="span2">
        <%= j.select :congenitalanomaly, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.congenitalanomaly), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Neurofibromatosis</p>
    </div>
    <div class="span2">
        <%= j.select :neurofibromatosis, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.neurofibromatosis), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Other familial cancer syndromes</p>
    </div>
    <div class="span2">
        <%= j.select :otherfamilialcancersynd, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.otherfamilialcancersynd), {:include_blank => true}, {"ng-model" => "journal.otherfamilialcancersynd"}%> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.otherfamilialcancersynd=='2'">
    <div class="span3">
        <p>If yes, please specify*:
    </div>
    <div class="span9">
        <%= j.text_area :otherfamilialcancersyndspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.otherfamilialcancersynd=='2'">
    <div class="span4 offset3">
      <p class="infoSmall">*See instructions for examples</p>
    </div>
  </div>
  <br>
  <div class="row-fluid">
    <div class="span3">
        <p>Cancer in the family, in a first-degree relative**</p>
    </div>
    <div class="span2">
        <%= j.select :cancerinfamily, options_from_collection_for_select(NoYesUnknown.all, :id,:noyesunknown_combo, @journal.cancerinfamily), {:include_blank => true}, {"ng-model" => "journal.cancerinfamily"}%> 
    </div>
    <div class="span7">
      <p class="infoSmall">**First-degree relative = parents, siblings or possible offspring of the childhood cancer patient.</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.cancerinfamily=='2'">
    <div class="span3">
        <p>If yes, please specify both relation, and type of cancer:
    </div>
    <div class="span9">
        <%= j.text_area :cancerinfamilyspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Previous surgical procedures</p>
    </div>
    <div class="span2">
        <%= j.select :prevsurgicalprocedures, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.prevsurgicalprocedures), {:include_blank => true}, {"ng-model" => "journal.prevsurgicalprocedures"}%> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.prevsurgicalprocedures=='2'">
    <div class="span3">
        <p>If yes, please specify*:
    </div>
    <div class="span9">
        <%= j.text_area :prevsurgicalproceduresspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.prevsurgicalprocedures=='2'">
    <div class="span4 offset3">
      <p class="infoSmall">*See instructions for examples</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Previous radiation therapy</p>
    </div>
    <div class="span2">
        <%= j.select :prevradtherapy, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.prevradtherapy), {:include_blank => true}, {"ng-model" => "journal.prevradtherapy"}%> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.prevradtherapy=='2'">
    <div class="span3">
        <p>If yes, specify (for what, when, where and dose):
    </div>
    <div class="span9">
        <%= j.text_area :prevradtherapyspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <h1 style="text-align:left;">First Primary Cancer</h1>
  <div class="row-fluid">
    <div class="span3">     
        <p><b>Diagnosis:</b></p><p class=infoSmall>(Please write the diagnosis as it is written in the medical record)</p>
    </div>
    <div class="span9">
        <%= j.text_area :firstprimcancerdiagnosis, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Date of diagnosis:</p>
    </div>
    <div class="span6">
        <%= j.date_select :dateofdiagnosis, :start_year => 1970, :end_year => Time.now.year, :default => @journal.dateofdiagnosis, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
    <div class="span7 offset3">
        <p class="infoSmall">Please see definition of the date of diagnosis in the instructions.</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
        <p>Please fill out the corresponding number for the first primary cancer type:</p>
    </div>
    <div class="span6">
      <br>
        <%= j.select :firstprimcancertype, options_from_collection_for_select(FirstPrimCancerType.all, :id,:firstprimcancertype_combo, @journal.firstprimcancertype), {:include_blank => true}, {"ng-model" => "journal.firstprimcancertype"}%> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype==1">
    <div class="span9">
      <h2 style=margin-bottom:0px;margin-top:20px;>1. Leukemia</h2>
    </div>
    <div class="span9">
      <p class=infoSmall>Please, only choose one option.</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='1'">
    <div class="span3">
        <p>Subtype:</p>
    </div>
    <div class="span5">
        <%= j.select :leukemiasubtype, options_from_collection_for_select(LeukemiaSubType.all, :id,:leukemiasubtype_combo, @journal.leukemiasubtype), :include_blank => true %> 
    </div>
    <div class="span4">
      <p class=infoSmall> ALL = Acute Lymphoblastic Leukemia<br>
                          AML = Acute Myeloid Leukemia<br>
                          MDS = Myelodysplastic disorder<br>
                          CML = Chronic Myelocytic Leukemia<br>
                          JMML = Juvenile Myelomonocytic Leukemia</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype==2">
    <div class="span9">
      <h2 style=margin-bottom:0px;margin-top:20px;>2. Hodgkin Lymphoma (HL, Hodgkin disease, HD)</h2>
    </div>
    <div class="span9">
      <p class=infoSmall>Please, only choose one option.</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='2'">
    <div class="span3">
        <p>Subtype:</p>
    </div>
    <div class="span5">
        <%= j.select :hodgkinlymphomasubtype, options_from_collection_for_select(HodgkinLymphomaSubType.all, :id,:hodgkinlymphomasubtype_combo, @journal.hodgkinlymphomasubtype), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='2'">
    <div class="span9 offset3"
      <p class=infoSmall>*Other e.g. primary mediastinal lymphoma, follicular lymphoma, nodular marginal zone lymphoma, peripheral T-cell.</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='3'">
    <div class="span9">
      <h2 style=margin-bottom:0px;margin-top:20px;>3. Non-Hodgkin Lymphoma (NHL)</h2>
    </div>
    <div class="span9">
      <p class=infoSmall>Please, only choose one option.</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='3'">
    <div class="span3">
        <p>Subtype:</p>
    </div>
    <div class="span8">
        <%= j.select :nonhodgkinlymphomasubtype, options_from_collection_for_select(NonHodgkinLymphomaSubType.all, :id,:nonhodgkinlymphomasubtype_combo, @journal.nonhodgkinlymphomasubtype), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='3'">
    <div class="span9 offset3"
      <p class=infoSmall>*Other e.g. primary mediastinal lymphoma, follicular lymphoma, nodular marginal zone lymphoma, peripheral T-cell.</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='4'">
    <div class="span9">
      <h2 style=margin-bottom:0px;margin-top:20px;>4. CNS tumor</h2>
    </div>
    <div class="span9">
      <p class=infoSmall>Please, only choose one option within each category (tumor type, site and laterality).</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='4'">
    <div class="span3">
        <p>Histological type:</p>
    </div>
    <div class="span7">
        <%= j.select :cnstumorhistologicaltype, options_from_collection_for_select(CnsTumorHistologicalType.all, :id,:cnstumorhistologicaltype_combo, @journal.cnstumorhistologicaltype), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='4'">
    <div class="span3">
        <p>Primary tumor site:</p>
    </div>
    <div class="span6">
        <%= j.select :cnstumorprimarytumorsite, options_from_collection_for_select(CnsTumorPrimaryTumorSite.all, :id,:cnstumorprimarytumorsite_combo, @journal.cnstumorprimarytumorsite), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='4'">
    <div class="span3 offset3">
        <p>Please specify*:</p>
        <p class=infoBoxRed><i>Please note that <b>Germinomas</b> in the CNS are <b>listed in group 12</b> (Germ cell and other gonadal tumors)</i></p>
    </div>
    <div class="span6">
        <%= j.text_area :cnstumorprimarytumorsiteotherspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
    <div class="row-fluid" ng-show="journal.firstprimcancertype=='4'">
    <div class="span3">
        <p>Laterality:</p>
    </div>
    <div class="span4">
        <%= j.select :cnstumorlaterality, options_from_collection_for_select(LateralityRlbmn.all, :id,:lateralityrlbmn_combo, @journal.cnstumorlaterality), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='4'">
    <div class="span9 offset3">
      <p class=infoBox><i><u>Do not confuse:</u> PNET = <b>Primitive</b> neuroectodermal tumor with PNET = <b>Peripheral</b> neuroectodermal tumor which is a Ewing sarcoma or belongs to Ewing family of tumors.</i></p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='5'">
    <div class="span9">
      <h2 style=margin-bottom:0px;margin-top:20px;>5. Neuroblastoma (Sympathetic nervous system tumor)</h2>
    </div>
    <div class="span9">
      <p class=infoSmall>Please, only choose one option within each category (tumor site and laterality).</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='5'">
    <div class="span3">
        <p>Primary tumor site:</p>
    </div>
    <div class="span4">
        <%= j.select :neuroblastomaprimarytumorsite, options_from_collection_for_select(NeuroblastomaPrimaryTumorSite.all, :id,:neuroblastomaprimarytumorsite_combo, @journal.neuroblastomaprimarytumorsite), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='5'">
    <div class="span3">
        <p>Laterality:</p>
    </div>
    <div class="span4">
        <%= j.select :neuroblastomalaterality, options_from_collection_for_select(LateralityRlbn.all, :id,:lateralityrlbn_combo, @journal.neuroblastomalaterality), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='5'">
    <div class="span3">
        <p>Metastasis at diagnosis:</p>
    </div>
    <div class="span4">
        <%= j.select :neuroblastomametastasisatdiagnosis, options_from_collection_for_select(NoYesUnknownNotInv.all, :id,:noyesunknownnotinv_combo, @journal.neuroblastomametastasisatdiagnosis), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='6'">
    <div class="span9">
      <h2 style=margin-bottom:0px;margin-top:20px;>6. Renal tumor</h2>
    </div>
    <div class="span9">
      <p class=infoSmall>Please, only choose one option within each category (tumor type and laterality).</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='6'">
    <div class="span3">
        <p>Tumor type:</p>
    </div>
    <div class="span4">
        <%= j.select :renaltumortype, options_from_collection_for_select(RenalTumorType.all, :id,:renaltumortype_combo, @journal.renaltumortype), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='6'">
    <div class="span3 offset3">
        <p>Please specify:</p>
    </div>
    <div class="span6">
        <%= j.text_area :renaltumortypeotherspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='6'">
    <div class="span3">
        <p>Laterality:</p>
    </div>
    <div class="span4">
        <%= j.select :renaltumorlaterality, options_from_collection_for_select(LateralityRlbu.all, :id,:lateralityrlbu_combo, @journal.renaltumorlaterality), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='6'">
    <div class="span3">
        <p>Metastasis at diagnosis:</p>
    </div>
    <div class="span4">
        <%= j.select :renaltumormetastasisatdiagnosis, options_from_collection_for_select(NoYesUnknownNotInv.all, :id,:noyesunknownnotinv_combo, @journal.renaltumormetastasisatdiagnosis), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='7'">
    <div class="span9">
      <h2 style=margin-bottom:0px;margin-top:20px;>7. Malignant bone tumor</h2>
    </div>
    <div class="span9">
      <p class=infoSmall>Please, only choose one option within each category (tumor type, site and laterality).</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='7'">
    <div class="span3">
        <p>Tumor type:</p>
    </div>
    <div class="span3">
        <%= j.select :malignantbonetumortype, options_from_collection_for_select(MalignantBoneTumorType.all, :id,:malignantbonetumortype_combo, @journal.malignantbonetumortype), :include_blank => true %> 
    </div>
    <div class="span6">
        <p class=infoBox>*PNET = <b>Peripheral</b> neuroectodermal tumor, belong to Ewing sarcoma family of tumors, including Askin tumor and Ewing sarcoma soft-tissue.</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='7'">
    <div class="span3 offset3">
        <p>Please specify:</p>
    </div>
    <div class="span6">
        <%= j.text_area :malignantbonetumortypeotherspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <br>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='7'">
    <div class="span3">
        <p>Laterality:</p>
    </div>
    <div class="span4">
        <%= j.select :malignantbonetumorlaterality, options_from_collection_for_select(LateralityRlbmu.all, :id,:lateralityrlbmu_combo, @journal.malignantbonetumorlaterality), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='7'">
    <div class="span3">
        <p>Metastasis at diagnosis:</p>
    </div>
    <div class="span4">
        <%= j.select :malignantbonetumormetastasisatdiagnosis, options_from_collection_for_select(NoYesUnknownNotInv.all, :id,:noyesunknownnotinv_combo, @journal.malignantbonetumormetastasisatdiagnosis), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='7'">
    <div class="span3">
        <p>Primary tumor site:</p>
    </div>
    <div class="span8">
        <%= j.select :malignantbonetumorprimarytumorsite, options_from_collection_for_select(MalignantBoneTumorPrimaryTumorSite.all, :id,:malignantbonetumorprimarytumorsite_combo, @journal.malignantbonetumorprimarytumorsite), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='7'">
    <div class="span3 offset3">
        <p>Please specify:</p>
    </div>
    <div class="span6">
        <%= j.text_area :malignantbonetumorprimarytumorsiteotherspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='8'">
    <div class="span9">
      <h2 style=margin-bottom:0px;margin-top:20px;>8. Soft tissue sarcomas*</h2>
    </div>
    <div class="span6">
      <p class=infoSmall>Please, only choose one option within each category (tumor type and laterality).</p>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='8'">
    <div class="span6">
      <p class=infoBox>*Soft-tissue sarcomas <b>not</b> including Ewing sarcoma</p>
    </div>
  </div>
  <br>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='8'">
    <div class="span3">
      <p>Tumor type:</p>
    </div>
    <div class="span5">
      <%= j.select :softtissuesarcomastumortype, options_from_collection_for_select(SoftTissueSarcomasTumorType.all, :id,:softtissuesarcomastumortype_combo, @journal.softtissuesarcomastumortype), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='8'">
    <div class="span3 offset3">
        <p>Please specify:</p>
    </div>
    <div class="span6">
        <%= j.text_area :malignantbonetumorprimarytumorsiteotherspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='8'">
    <div class="span3">
      <p>Laterality:</p>
    </div>
    <div class="span4">
      <%= j.select :softtissuesarcomaslaterality, options_from_collection_for_select(LateralityRlbu.all, :id,:lateralityrlbu_combo, @journal.softtissuesarcomaslaterality), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='8'">
    <div class="span3">
      <p>Primary tumor site:</p>
    </div>
    <div class="span4">
      <%= j.select :softtissuesarcomasprimarytumorsite, options_from_collection_for_select(SoftTissueSarcomasPrimaryTumorSite.all, :id,:softtissuesarcomasprimarytumorsite_combo, @journal.softtissuesarcomasprimarytumorsite), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='8'">
    <div class="span3 offset3">
        <p>Please specify:</p>
    </div>
    <div class="span6">
        <%= j.text_area :softtissuesarcomasprimarytumorsiteotherspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='8'">
    <div class="span3">
      <p>Metastasis at diagnosis:</p>
    </div>
    <div class="span4">
      <%= j.select :softtissuesarcomasmetastasisatdiagnosis, options_from_collection_for_select(NoYesUnknownNotInv.all, :id,:noyesunknownnotinv_combo, @journal.softtissuesarcomasmetastasisatdiagnosis), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='9'">
    <div class="span4">
      <h2>9. Retinoblastoma</h2>
      <p>Laterality</p>
      <%= j.select :retinoblastomalaterality, options_from_collection_for_select(LateralityRlbu.all, :id,:lateralityrlbu_combo, @journal.retinoblastomalaterality), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='10'">
    <div class="span4">
      <h2>10. Hepatic tumor</h2>
      <p>Tumor type</p>
      <%= j.select :hepatictumortype, options_from_collection_for_select(HepaticTumorType.all, :id,:hepatictumortype_combo, @journal.hepatictumortype), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='11'">
    <h2>11. Carcinomas</h2>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='11'">
    <div class="span4">
      <p>Tumor type</p>
      <%= j.select :carcinomastumortype, options_from_collection_for_select(CarcinomasTumorType.all, :id,:carcinomastumortype_combo, @journal.carcinomastumortype), :include_blank => true %>
      <%= j.text_area :carcinomastumortypeotherspec, :cols => "20", :rows => "1" %>
    </div>
    <div class="span3">
      <p>Laterality</p>
      <%= j.select :carcinomaslaterality, options_from_collection_for_select(LateralityRlbn.all, :id,:lateralityrlbn_combo, @journal.carcinomaslaterality), :include_blank => true %>
    </div>
    <div class="span4">
      <p>Metastasis at diagnosis</p>
      <%= j.select :carcinomasmetastasisatdiagnosis, options_from_collection_for_select(NoYesUnknownNotInv.all, :id,:noyesunknownnotinv_combo, @journal.carcinomasmetastasisatdiagnosis), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='12'">
    <h2>12. Germ cell and gonadal tumors</h2>
    <p>GCT = Germ cell tumor</p>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='12'">
    <div class="span4">
      <p>Tumor type</p>
      <%= j.select :germcelltumorsandgonadalstumorstype, options_from_collection_for_select(GermCellTumorsAndGonadalsTumorType.all, :id,:germcelltumorsandgonadalstumorstype_combo, @journal.germcelltumorsandgonadalstumorstype), :include_blank => true %>
    </div>
    <div class="span3">
      <p>Laterality</p>
      <%= j.select :germcelltumorsandgonadaltumorslaterality, options_from_collection_for_select(LateralityRlbmn.all, :id,:lateralityrlbmn_combo, @journal.germcelltumorsandgonadaltumorslaterality), :include_blank => true %>
    </div>
    <div class="span4">
      <p>Metastasis at diagnosis</p>
      <%= j.select :germcellandgonadalstumorsmetastasisatdiagnosis, options_from_collection_for_select(NoYesUnknownNotInv.all, :id,:noyesunknownnotinv_combo, @journal.germcellandgonadalstumorsmetastasisatdiagnosis), :include_blank => true %>
    </div>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='13'">
    <h2>13. Other</h2>
  </div>
  <div class="row-fluid" ng-show="journal.firstprimcancertype=='13'">
    <div class="span5">
      <p>Tumor type</p>
      <%= j.select :othertumortype, options_from_collection_for_select(OtherTumorType.all, :id,:othertumortype_combo, @journal.othertumortype), :include_blank => true %>
      <%= j.text_area :othertumortypeotherspec, :cols => "20", :rows => "1" %>
    </div>
    <div class="span5 offset1">
      <p>Primary tumor site</p>
      <%= j.select :otherprimarytumorsite, options_from_collection_for_select(OtherPrimaryTumorSite.all, :id,:otherprimarytumorsite_combo, @journal.otherprimarytumorsite), :include_blank => true %>
      <%= j.text_area :otherprimarytumorsiteotherspec, :cols => "20", :rows => "1" %>
    </div>
  </div>
  <br><br>
  <div class="row-fluid">
    <div class="span3">
      <h2>Radiotherapy</h2>
    </div>
    <div style="margin-top:10px;"class="span2">
      <%= j.select :radiotherapy, options_from_collection_for_select(NoYesUnknown.all, :id,:noyesunknown_combo, @journal.radiotherapy), :include_blank => true %> 
    </div>
  </div>
<!--Allt sem tilheyrir radiotherapy bara birt ef Yes í Radiotherapy-->  
  <div class="row-fluid">
    <div class="span3">
        <p><b>External beam radiotherapy:</b></p>
    </div>
    <div class="span2">
      <%= j.select :externalbeamradiotherapy, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.externalbeamradiotherapy), :include_blank => true %> 
    </div>
  </div>
<!--Allt sem tilheyrir External beam radiotherapy birtist ef Yes í því comboi-->
  <div class="row-fluid">
    <div class="span3">
      <p>Date of start:</p>
    </div>
    <div class="span6">
      <%= j.date_select :externalbeamradiotherapydateofstart, :start_year => 1970, :end_year => Time.now.year, :default => @journal.externalbeamradiotherapydateofstart, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>Date of completion:</p>
    </div>
    <div class="span6">
      <%= j.date_select :externalbeamradiotherapydateofcompletion, :start_year => 1970, :end_year => Time.now.year, :default => @journal.externalbeamradiotherapydateofcompletion, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Treating hospital(-s) and department, radiotherapy:</p>
    </div>
    <div class="span9">
        <%= j.text_area :externalbeamradiotherapytreatinghospital, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
      <p class="infoSmallRed">Radiotherapy records AND relevant text in the medical record copied*:</p>
    </div>
    <div class="span6" style=margin-top:5px;>
      <%= j.date_select :externalbeamradiotherapyrecordscopied, :start_year => 1970, :end_year => Time.now.year, :default => @journal.externalbeamradiotherapyrecordscopied, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span6 offset4">
      <p class="infoSmall" style=margin-top:-20px;>*copied WITHOUT any personal identifications, only including a front page (e.g. with the ALiCCS study number).</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p><b>Brachytherapy:</b></p>
    </div>
    <div class="span2">
      <%= j.select :brachytherapy, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.brachytherapy), :include_blank => true %> 
    </div>
  </div>
<!--Allt sem tilheyrir Brachytherapy birtist ef Yes í því comboi-->
  <div class="row-fluid">
    <div class="span3">
      <p>Date of start:</p>
    </div>
    <div class="span6">
      <%= j.date_select :brachytherapydateofstart, :start_year => 1970, :end_year => Time.now.year, :default => @journal.brachytherapydateofstart, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>Date of completion:</p>
    </div>
    <div class="span6">
      <%= j.date_select :brachytherapydateofcompletion, :start_year => 1970, :end_year => Time.now.year, :default => @journal.brachytherapydateofcompletion, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Treating hospital(-s) and department, radiotherapy:</p>
    </div>
    <div class="span9">
        <%= j.text_area :brachytherapytreatinghospital, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
      <p class="infoSmallRed">Radiotherapy records AND relevant text in the medical record copied*:</p>
    </div>
    <div class="span6" style=margin-top:5px;>
      <%= j.date_select :brachytherapyrecordscopied, :start_year => 1970, :end_year => Time.now.year, :default => @journal.brachytherapyrecordscopied, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span6 offset4">
      <p class="infoSmall" style=margin-top:-20px;>*copied WITHOUT any personal identifications, only including a front page (e.g. with the ALiCCS study number).</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p><b>Internal (metabolic) radiotherapy:</b></p>
    </div>
    <div class="span2">
      <%= j.select :internalradiotherapy, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.internalradiotherapy), :include_blank => true %> 
    </div>
  </div>
<!--Allt sem tilheyrir Internal radiotherapy birtist ef Yes í því comboi-->
  <div class="row-fluid">
    <div class="span3">
      <p>Date of start:</p>
    </div>
    <div class="span6">
      <%= j.date_select :internalradiotherapydateofstart, :start_year => 1970, :end_year => Time.now.year, :default => @journal.internalradiotherapydateofstart, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <p>Treating hospital(-s) and department, radiotherapy:</p>
    </div>
    <div class="span9">
        <%= j.text_area :internalradiotherapytreatinghospital, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
      <p class="infoSmallRed">Radiotherapy records AND relevant text in the medical record copied*:</p>
    </div>
    <div class="span6" style=margin-top:5px;>
      <%= j.date_select :internalradiotherapyrecordscopied, :start_year => 1970, :end_year => Time.now.year, :default => @journal.internalradiotherapyrecordscopied, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span6 offset4">
      <p class="infoSmall" style=margin-top:-20px;>*copied WITHOUT any personal identifications, only including a front page (e.g. with the ALiCCS study number).</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
        <h2><b>Surgery</b></h2>
    </div>
    <div class="span2" style="margin-top:10px;">
      <%= j.select :surgery, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.surgery), :include_blank => true %> 
    </div>
  </div>
  <!--Allt sem tilheyrir Surgery birtist ef Yes í því comboi-->
  <%= j.fields_for :surgeries do |builder| %>
    <%= render 'surgery_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "Add surgery", j, :surgeries %>
  <br><br>
  <div class="row-fluid">
    <div class="span3">
        <h2><b>Chemotherapy</b></h2>
    </div>
    <div class="span2" style="margin-top:10px;">
      <%= j.select :chemotherapy, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.chemotherapy), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid">
    <div class="span6 offset1" style="margin-top:-20px;">
      <p class="infoSmall">and other relevant drugs (see instructions and drug codes in Appendix I)</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>Date of initiation of chemotherapy:</p>
    </div>
    <div class="span6" style="margin-top:10px;">
      <%= j.date_select :chemotherapydateinitiation, :start_year => 1970, :end_year => Time.now.year, :default => @journal.chemotherapydateinitiation, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>Date of all chemotherapy completed:</p>
    </div>
    <div class="span6">
      <%= j.date_select :chemotherapydatecompletion, :start_year => 1970, :end_year => Time.now.year, :default => @journal.chemotherapydatecompletion, :include_blank=> true, order: [:day, :month, :year] %>
    </div>
  </div>

  <%= j.fields_for :chemo_therapies do |builder| %>
    <%= render 'chemo_therapy_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "Add chemotherapy year", j, :chemo_therapies %>
  <br><br>
  <table class="span12" style="position:relative;left:-55px">
    <thead>
      <th style="width:260px">Cytostatic drug (code - name)</th>
      <th style="width:200px">Total cumulated dose<br>(mg/m<sup>2</sup> or units/m<sup>2</sup>)</th>
      <th style="width:110px">Dose quality</th>
      <th style="width:260px">Anthracyclines: bolus vs. inf**</th>
      <th></th>
    </thead>
    <tbody>
  <%= j.fields_for :cytostatic_drug_given do |builder| %>
    <%= render 'cytostatic_drug_given_fields', f: builder %>
  <% end %>
    </tbody>
  </table>

  <%= link_to_add_fields "Add cytostatic drug given", j, :cytostatic_drug_given %>

  <div class="row-fluid">
    <div class="span4">
      <p><b>Treatment protocol (if applicable):</b></p>
      <p class="infoSmall" style="margin-top:-10px;">If the patient is treated (more or less) according to a protocol, please write the name og the protocol.</p>
    </div>
    <div class="span8">
        <%= j.text_area :chemotherapytreatmentprotocolspec, :cols => "30", :rows => "3" %>
    </div>
  </div>
  <div class="row-fluid">
    <p><b>Central venous catheter (CVC)</b></p>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>CVC inserted?</p>
    </div>
    <div class="span2">
      <%= j.select :chemotherapyCVC, options_from_collection_for_select(NoYesUnknown.all, :id,:noyesunknown_combo, @journal.chemotherapyCVC), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>If yes, how many in total were inserted during the treatment period?</p>
    </div>
    <div class="span2">
      <!--Athuga-->
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>Date (month and year) of insertion of the first CVC:</p>
    </div>
    <div class="span6" style="margin-top:10px;">
      <%= j.date_select :chemotherapyinsertiondatecvc, {:start_year => 1970, :end_year => Time.now.year, :default => @journal.chemotherapyinsertiondatecvc, :include_blank=> true, order: [:month, :year]}, {:class => "date_generic"}  %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>Date of permanent removal:</p>
    </div>
    <div class="span6" style="margin-top:10px;">
      <%= j.date_select :chemotherapypermanentremovaldate, {:start_year => 1970, :end_year => Time.now.year, :default => @journal.chemotherapypermanentremovaldate, :include_blank=> true, order: [:month, :year]}, {:class => "date_generic"}  %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
        <h2><b>Relapse / Recurrent disease</b></h2>
    </div>
    <div class="span2" style="margin-top:10px;">
      <%= j.select :relapse, options_from_collection_for_select(NoYes.all, :id,:noyes_combo), :include_blank => true %> 
    </div>
  </div>
  <div class="row-fluid">
    <div class="span8 offset4" style="margin-top:-15px;">
      <p class="infoSmallRed">If yes, please fill out an other treatment form for each relapse/recurrence.</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
      <p>Total number of relapses:</p>
    </div>
    <div class="span1">
        <!--Innsláttur á integer tölu, síðan birtist eftirfarandi eins oft og númerið segir til um. Dagsetning og ath remission status? -->
        <%= j.number_field :relapseno, {min: 0} %>
    </div>
  </div>
  <div class='row-fluid'>
  <%= j.fields_for :relapses do |builder, index| %>
    <%= render 'relapse_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "Add relapse", j, :relapses %>
  </div>
  <div class="row-fluid">
    <div class="span4">Remission status (according to med. records):</div>
    <div class="span4">
      <%= j.select :remissionstatus, options_from_collection_for_select(RemissionStatus.all, :id, :combo), :include_blank => true %>
    </div>
  </div>

  <div class="row-fluid">
    <div class="span4">
        <h2><b>After the cancer treatment</b></h2>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>Date of last doctors visit:</p>
    </div>
    <div class="span6">
      <%= j.date_select :lastdoctorsvisitdate, {:start_year => 1970, :end_year => Time.now.year, :default => @journal.lastdoctorsvisitdate, :include_blank=> true, order: [:day, :month, :year]}, {:class => "date_generic"}  %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span3">
      <p>Status at last doctor visit:</p>
    </div>
    <div class="span6">
      <%= j.select :lastdoctorsvisitstatus, options_from_collection_for_select(LastDoctorsVisitStatus.all, :id,:lastdoctorsvisitstatus_combo,@journal.lastdoctorsvisitstatus), :include_blank => true %> 
    </div>
  </div>
  <!--Sýna ef ,,Permanent complications valið í combo fyrir ofan-->
  <div class="row-fluid">
    <div class="span3">
        <p>If permanent complications, please specify in free text and note any disabilities:</p>
    </div>
    <div class="span9">
        <%= j.text_area :permanentcomplicationspec, :cols => "30", :rows => "7" %>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span4">
        <h2><b>Bone marrow transplantation</b></h2><p class="infoSmall" style="margin-top:-20px;">(BMT, Stem cell transplant, SCT)</p>
    </div>
    <div class="span2" style="margin-top:10px;">
      <%= j.select :bonemarrowtransplantation, options_from_collection_for_select(NoYes.all, :id,:noyes_combo, @journal.bonemarrowtransplantation), :include_blank => true %> 
    </div>
  </div>
  <%= j.fields_for :bone_marrow_transplantations do |builder| %>
  <%= render 'bone_marrow_transplantation_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "Add bone marrow transplantation", j, :bone_marrow_transplantations %>
















  <div align="center">
        <%= j.submit "Save changes", class: "btn btn-large btn-primary" %>
  </div>
      
      <% end %>
</div>